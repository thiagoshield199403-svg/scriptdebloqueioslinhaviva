<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Sistema Operacional</title>

<style>
*{box-sizing:border-box}
body{
    margin:0;
    font-family: Arial, sans-serif;
    background:
      linear-gradient(rgba(0,0,0,0.45), rgba(0,0,0,0.45)),
      url("fundo.jpg");
    background-size: cover;
    background-attachment: fixed;
}

/* ===== LAYOUT ===== */
.app{
    display:flex;
    min-height:100vh;
}

/* ===== SIDEBAR ===== */
.sidebar{
    width:260px;
    background:
      linear-gradient(180deg,#0b5394,#062f57);
    color:#fff;
    display:flex;
    flex-direction:column;
    padding:0;
    box-shadow: 4px 0 15px rgba(0,0,0,0.4);
}

/* ===== HEADER ===== */
.sidebar-header{
    padding:20px 15px;
    background:linear-gradient(135deg,#0d63b5,#083b6f);
    border-bottom:1px solid rgba(255,255,255,0.2);
    text-align:center;
}

.sidebar-header .icon{
    font-size:28px;
}

.sidebar-header .title{
    font-size:18px;
    font-weight:bold;
    letter-spacing:1px;
}

.sidebar-header .sub{
    font-size:11px;
    opacity:0.8;
    margin-top:4px;
}

/* ===== MENU ===== */
.menu{
    padding:15px;
    flex:1;
}

.menu button{
    width:100%;
    background:rgba(255,255,255,0.05);
    border:none;
    color:#fff;
    padding:14px;
    text-align:left;
    border-radius:10px;
    cursor:pointer;
    font-weight:bold;
    margin-bottom:10px;
    transition:all 0.2s ease;
}

.menu button:hover{
    background:rgba(255,255,255,0.15);
    transform:translateX(4px);
}

.menu button.active{
    background:#fff;
    color:#0b5394;
    box-shadow:0 4px 10px rgba(0,0,0,0.3);
}

/* ===== FOOTER ===== */
.sidebar-footer{
    padding:15px;
    border-top:1px solid rgba(255,255,255,0.2);
    display:flex;
    align-items:center;
    gap:10px;
    background:rgba(0,0,0,0.2);
}

.avatar{
    width:36px;
    height:36px;
    border-radius:50%;
    background:#fff;
    color:#0b5394;
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:bold;
}

.user-info{
    font-size:12px;
}
.user-info b{
    display:block;
    font-size:13px;
}


/* ===== CONTE√öDO ===== */
.content{
    flex:1;
    padding:25px;
}

.container{
    background: linear-gradient(
      180deg,
      rgba(255,255,255,0.98),
      rgba(245,248,252,0.95)
    );
    border-radius:16px;
    padding:24px;
    max-width:900px;
    margin:auto;
    box-shadow:
      0 8px 25px rgba(0,0,0,0.25),
      inset 0 0 0 1px rgba(11,83,148,0.08);
    border-top:4px solid #ff7a00; /* laranja Energisa */
}


h2{
    text-align:center;
    color:#0b5394;
}

/* ===== FORM ===== */
label{font-weight:bold;display:block;margin-top:10px}
input,select,textarea,button{
    width:100%;
    padding:8px;
    margin-top:5px;
    border-radius:6px;
    border:1px solid #ccc;
}

textarea{height:90px}
#historico{height:260px}

/* ===== GRID ===== */
.linha-2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.linha-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px}

/* ===== OP√á√ïES ===== */
.opcoes{display:flex;gap:10px;margin-top:5px}
.opcoes input{display:none}
.card{
    border:2px solid #ccc;
    padding:8px 14px;
    border-radius:8px;
    cursor:pointer;
    font-weight:bold;
}
.opcoes input:checked + .card{
    background:#0b5394;
    color:#fff;
}

/* ===== BOT√ïES ===== */
button{
    background:#0b5394;
    color:#fff;
    border:none;
    font-weight:bold;
    cursor:pointer;
    margin-top:10px;
}
button.sec{background:#777}

/* ===== M√ìDULOS ===== */
.module{display:none}
.module.active{display:block}

/* ===== TOAST ===== */
#toast{
    position:fixed;
    top:15px;
    left:50%;
    transform:translateX(-50%);
    background:#2e7d32;
    color:#fff;
    padding:10px 22px;
    border-radius:8px;
    font-weight:bold;
    display:none;
    z-index:9999;
}
/* ===== FOOTER PREMIUM ===== */
.premium-footer{
    display:flex;
    align-items:center;
    gap:12px;
    padding:16px;
    border-top:1px solid rgba(255,255,255,0.15);
    background:linear-gradient(135deg, rgba(255,255,255,0.05), rgba(0,0,0,0.15));
    backdrop-filter: blur(6px);
}

.status-indicator{
    width:10px;
    height:40px;
    border-radius:6px;
    background:linear-gradient(180deg,#00ff9c,#00c853);
    box-shadow:0 0 10px rgba(0,255,156,0.8);
}

.system-info{
    display:flex;
    flex-direction:column;
    line-height:1.2;
}

.status-line{
    display:flex;
    align-items:center;
    gap:6px;
}

.status-text{
    font-size:11px;
    letter-spacing:1.5px;
    font-weight:bold;
    color:#00ff9c;
}

.status-dot{
    width:6px;
    height:6px;
    border-radius:50%;
    background:#00ff9c;
    box-shadow:0 0 6px rgba(0,255,156,0.9);
    animation:pulse 1.5s infinite;
}

.system-name{
    font-size:12px;
    font-weight:bold;
    letter-spacing:1px;
    color:#fff;
    opacity:0.9;
}

.system-time{
    font-size:14px;          /* <<< AQUI aumenta o tamanho */
    opacity:0.9;
    margin-top:4px;
    font-family: monospace;
    letter-spacing:0.5px;
}


@keyframes pulse{
    0%{transform:scale(1);opacity:1}
    50%{transform:scale(1.4);opacity:0.5}
    100%{transform:scale(1);opacity:1}
}

/* ===== ENERGISA HEADER ===== */
.energisa-header{
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    padding:20px 10px;
}

.energisa-logo{
    max-width:160px;
    height:auto;
    margin-bottom:8px;
    filter: drop-shadow(0 0 6px rgba(0,0,0,0.4));
}

.energisa-sub{
    font-size:11px;
    letter-spacing:1px;
    opacity:0.85;
    color:#fff;
}

.energisa-logo{
    animation:logoGlow 1.5s ease-in-out infinite;
}

@keyframes logoGlow{
    0%{filter:drop-shadow(0 0 4px rgba(0,255,255,0.3))}
    50%{filter:drop-shadow(0 0 14px rgba(0,255,255,0.7))}
    100%{filter:drop-shadow(0 0 4px rgba(0,255,255,0.3))}
}
/* ===== MICROINTERA√á√ïES MENU ===== */
.menu button{
    transition: all 0.25s ease;
    position: relative;
    overflow: hidden;
}

.menu button::before{
    content:"";
    position:absolute;
    left:0;
    top:0;
    width:4px;
    height:100%;
    background:#00ff9c;
    opacity:0;
    transition:0.3s;
}

.menu button:hover::before{
    opacity:1;
}

.menu button:hover{
    transform: translateX(6px);
}

.menu button.active{
    position:relative;
}
/* ===== MICROINTERA√á√ïES BOT√ïES ===== */
button{
    transition: all 0.2s ease;
}

button:hover{
    transform: translateY(-2px);
    box-shadow:0 6px 12px rgba(0,0,0,0.25);
}

button:active{
    transform: scale(0.97);
    box-shadow:0 3px 6px rgba(0,0,0,0.2);
}
/* ===== MICROINTERA√á√ïES CAMPOS ===== */
input, select, textarea{
    transition: all 0.2s ease;
}

input:focus, select:focus, textarea:focus{
    outline:none;
    border-color:#00ff9c;
    box-shadow:0 0 0 2px rgba(0,255,156,0.25);
    transform: scale(1.01);
}
/* ===== TRANSI√á√ÉO DE TELAS ===== */
.module{
    animation: fadeInModule 0.35s ease;
}

@keyframes fadeInModule{
    from{
        opacity:0;
        transform: translateY(8px);
    }
    to{
        opacity:1;
        transform: translateY(0);
    }
}
#toast{
    animation: toastIn 0.4s ease;
}

@keyframes toastIn{
    from{
        opacity:0;
        transform: translateY(-10px);
    }
    to{
        opacity:1;
        transform: translateY(0);
    }
}
/* ===== ISOLAMENTO DO SISTEMA DE EQUIPES ===== */

.equipes-sistema .container{
  max-width:1200px;
}

.equipes-sistema .form-grid{
  display:grid;
  grid-template-columns: repeat(auto-fit,minmax(160px,1fr));
  gap:8px;
}

.equipes-sistema .form-grid-6{
  display:grid;
  grid-template-columns: repeat(auto-fit,minmax(140px,1fr));
  gap:8px;
}

.equipes-sistema .botoes{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin:10px 0;
}

.equipes-sistema button{
  width:auto !important;
}

.equipes-sistema input,
.equipes-sistema select,
.equipes-sistema textarea{
  width:100%;
}

/* ===== MAPAS ===== */
.equipes-sistema .mapas-grid{
  width:100%;
  display:grid;
  grid-template-columns: repeat(5, 1fr);
  gap:10px;
  margin-top:10px;
}

.equipes-sistema .mapa-card{
  position: relative;
  height: 160px;
  border-radius:10px;
  overflow:hidden;
  cursor:pointer;
  box-shadow:0 3px 8px rgba(0,0,0,.25);
  transition:.3s;
  background:#000;
}

.equipes-sistema .mapa-card img{
  width:100%;
  height:100%;
  object-fit:contain;
  background:#fff;
}

/* ===== TABELA ===== */
.equipes-sistema table{
  width:100%;
  border-collapse:collapse;
  margin-top:15px;
}

.equipes-sistema th,
.equipes-sistema td{
  border:1px solid #ccc;
  padding:6px;
  text-align:center;
  font-size:13px;
}

.equipes-sistema th{
  background:#eee;
}
/* ===== EFEITOS EQUIPES ===== */
.equipes-sistema button{
  transition: all .2s ease;
}

.equipes-sistema button:hover{
  transform: translateY(-2px);
  box-shadow:0 6px 12px rgba(0,0,0,.25);
}

.equipes-sistema .mapa-card{
  transition:.3s;
}

.equipes-sistema .mapa-card:hover{
  transform: scale(1.05);
  box-shadow:0 8px 18px rgba(0,0,0,.35);
}

.equipes-sistema input:focus,
.equipes-sistema select:focus,
.equipes-sistema textarea:focus{
  border-color:#00ff9c;
  box-shadow:0 0 0 2px rgba(0,255,156,0.25);
}
/* ===== MODAL MAPA (FIX DEFINITIVO) ===== */
.modal-mapa{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.9);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 999999;
}

.modal-mapa img{
  max-width: 95%;
  max-height: 95%;
  border-radius: 10px;
  background: #fff;
  animation: zoomIn .25s ease;
}

@keyframes zoomIn{
  from{transform:scale(.85);opacity:0}
  to{transform:scale(1);opacity:1}
}
/* ===== TOGGLE MAPA ===== */
#mapas-container.hidden{
  display:none;
}
/* ===== FILTROS EQUIPES ===== */
.eq-filtros{
  display:grid;
  grid-template-columns: 1fr 220px auto;
  gap:10px;
  align-items:center;
  margin-top:12px;
}

#eq_resumo{
  font-weight:bold;
  white-space:nowrap;
}

/* Responsivo */
@media(max-width:900px){
  .eq-filtros{
    grid-template-columns: 1fr 1fr;
  }

  #eq_resumo{
    grid-column: 1 / -1;
  }
}

/* ===== FORM EQUIPES 2 LINHAS FIXAS ===== */
.eq-linha1{
  display:grid;
  grid-template-columns: 
    1.2fr  /* equipe */
    1.2fr  /* integrantes */
    1fr    /* telefone */
    1fr    /* viatura */
    0.8fr  /* radio */
    0.9fr  /* tipo */
    1.2fr; /* regional */
  gap:8px;
}

.eq-linha2{
  display:grid;
  grid-template-columns: 2.5fr 1.5fr;
  gap:8px;
  margin-top:8px;
}
/* ===== ALTURA COMPACTA LINHA 2 ===== */
.eq-linha2 textarea{
  height:48px;     /* antes era grande */
  resize:none;     /* trava redimensionamento */
}

.eq-linha2 select{
  height:48px;
}
/* ===== ALERTAS VISUAIS ===== */
.alerta{
  font-size:18px;
  animation: piscar 1s infinite;
}

.alerta.vermelho{ color:#c62828; }
.alerta.amarelo{ color:#f9a825; }

@keyframes piscar{
  0%{opacity:1}
  50%{opacity:.3}
  100%{opacity:1}
}
/* ===== PRIORIDADE PEND√äNCIAS ===== */
.prio-normal{
  color:#2e7d32;        /* VERDE */
  font-weight:800;
}

.prio-alta{
  color:#f9a825;        /* AMARELO */
  font-weight:900;
  animation: alertaPiscar 1s infinite;
}

.prio-critica{
  color:#c62828;        /* VERMELHO */
  font-weight:900;
  animation: alertaPiscar 0.7s infinite;
}

/* ===== STATUS / VENCIMENTO ===== */
.status-ok{
  color:#f9a825;        /* AMARELO */
  font-weight:800;
}

.status-vencido{
  color:#c62828;        /* VERMELHO */
  font-weight:900;
  animation: alertaPiscar 1s infinite;
}

/* ===== ANIMA√á√ÉO GLOBAL ===== */
@keyframes alertaPiscar{
  0%{opacity:1}
  50%{opacity:.3}
  100%{opacity:1}
}


/* ===== STATUS / VENCIMENTO ===== */
.status-vencido{
  color:#c62828;
  font-weight:900;
  animation: piscar 1s infinite;
}

/* ===== ANIMA√á√ÉO ===== */
@keyframes piscar{
  0%{opacity:1}
  50%{opacity:.3}
  100%{opacity:1}
}
.footer-global{
  position: fixed;
  bottom: 0;
  left: 260px; /* largura da sidebar */
  right: 0;
  background: rgba(0,0,0,0.6);
  color: #ffffff;
  text-align: center;
  font-size: 11px;
  padding: 6px;
  letter-spacing: 1px;
  z-index: 9999;
  backdrop-filter: blur(6px);
  border-top: 1px solid rgba(255,255,255,0.15);
}

.footer-global{
  position: fixed;
  bottom: 0;
  left: 260px; /* largura da sidebar */
  right: 0;
  height: 55px;
  background: linear-gradient(90deg,#062f57,#0b5394,#062f57);
  display: flex;
  align-items: center;
  padding: 0 18px;
  color: #fff;
  z-index: 9999;
  box-shadow: 0 -4px 12px rgba(0,0,0,.4);
  font-family: Arial, sans-serif;
}

/* LOGO */
.footer-left{
  display:flex;
  align-items:center;
}

.footer-logo{
  height: 32px;
  filter: drop-shadow(0 0 6px rgba(0,255,255,.6));
}

/* CENTRO */
.footer-center{
  flex:1;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
}

.footer-status{
  display:flex;
  align-items:center;
  gap:6px;
  font-size:11px;
  font-weight:bold;
  letter-spacing:1.5px;
}

.footer-status .dot{
  width:8px;
  height:8px;
  border-radius:50%;
  background:#00ff9c;
  box-shadow:0 0 8px rgba(0,255,156,.9);
  animation:pulse 1.5s infinite;
}

.status-text{
  color:#00ff9c;
}

.footer-msg{
  font-size:12px;
  opacity:.9;
}

/* DIREITA */
.footer-right{
  font-family: monospace;
  font-size:13px;
  letter-spacing:1px;
  opacity:.9;
}

/* ANIMA√á√ÉO */
@keyframes pulse{
  0%{transform:scale(1);opacity:1}
  50%{transform:scale(1.4);opacity:.4}
  100%{transform:scale(1);opacity:1}
}


</style>
</head>

<body>

<div id="toast">Texto copiado com sucesso!</div>

<div class="app">

<!-- ===== SIDEBAR ===== -->
<div class="sidebar">

  <div class="sidebar-header energisa-header">
    <img src="Energisa.svg.png" class="energisa-logo" alt="Energisa">
    <div class="energisa-sub">Centro de Opera√ß√£o Integrado</div>
</div>


<div class="menu">
    <button class="active" onclick="openModule('rel',this)">üîí Script Bloqueios LV</button>
    <button onclick="openModule('obs',this)">üìù Script Ocorr√™ncias</button>
    <button onclick="openModule('callback',this)">üìû Script Callback</button>
    <button onclick="openModule('equipes',this)">üë∑ Gest√£o de Equipes</button>
    <button onclick="openModule('ss',this)">üßæ Preenchimento de SS</button>

</div>


<div class="sidebar-footer premium-footer">
    <div class="status-indicator"></div>

    <div class="system-info">
        <div class="status-line">
            <span class="status-text">ONLINE</span>
            <span class="status-dot"></span>
        </div>

        <div class="system-name">COI OPERACIONAL</div>
        <div class="system-time" id="dataHoraSistema"></div>
    </div>
</div>


</div>


<!-- ===== CONTENT ===== -->
<div class="content">

<!-- OCORR√äNCIAS -->
<div id="obs" class="module">
<div class="container">
<h2>SCRIPT OBSERVA√á√ïES / OCORR√äNCIAS </h2>

<label>Nova observa√ß√£o:</label>
<textarea id="obsTexto"></textarea>

<button onclick="adicionarHistorico()">Adicionar</button>
<button class="sec" onclick="copiarHistorico()">Copiar Hist√≥rico</button>
<button class="sec" onclick="limparHistorico()">Limpar</button>

<label>Hist√≥rico:</label>
<textarea id="historico" readonly></textarea>
</div>
</div>

<!-- BLOQUEIO -->
<div id="rel" class="module active">
<div class="container">
<h2>SCRIPT BLOQUEIO ‚Äì LINHA VIVA</h2>

<div class="linha-2">
<div><label>Respons√°vel:</label><input id="responsavel"></div>
<div><label>Equipe:</label><input id="bloq_equipe"></div>
</div>

<div class="linha-3">
<div><label>Contato:</label><input id="contato"></div>
<div><label>Viatura:</label><input id="viatura"></div>
<div><label>R√°dio:</label><select id="radio"><option>Sim</option><option>N√£o</option></select></div>
</div>

<div class="linha-3">
<div><label>Teste R√°dio?</label><select id="testeRadio"><option>Sim</option><option>N√£o</option></select></div>
<div><label>Self-healing?</label><select id="selfhealing"><option>Sim</option><option>N√£o</option></select></div>
<div><label>Desativou SH?</label><select id="desativou"><option>Sim</option><option>N√£o</option></select></div>
</div>

<div class="linha-2">
<div><label>Refer√™ncia:</label><input id="referencia"></div>
<div><label>Servi√ßo:</label><input id="servico"></div>
</div>

<label>Observa√ß√£o:</label>
<textarea id="obsRel"></textarea>

<button onclick="gerarRelatorio()">Gerar e Copiar</button>
<button class="sec" onclick="limparRelatorio()">Limpar</button>

<label>Relat√≥rio</label>
<textarea id="resultado" readonly></textarea>
</div>
</div>

<!-- CALLBACK -->
<div id="callback" class="module">
<div class="container">
<h2>CALLBACK</h2>

<label>Data / Hora</label>
<input id="dataHora" readonly>

<div class="linha-3">
<div><label>Operador:</label><input id="operador"></div>
<div><label>Telefone:</label><input id="telefone"></div>
<div><label>Ramal:</label><input id="ramal"></div>
</div>

<label>Atua√ß√£o realizada via:</label>
<div class="opcoes">
<input type="radio" name="atuacao" id="celular">
<label for="celular" class="card">Celular</label>

<input type="radio" name="atuacao" id="ramalRadio">
<label for="ramalRadio" class="card">Ramal</label>
</div>

<div class="linha-2">
<div><label>Cliente Reincidente?</label><select id="reincidente"><option>N√£o</option><option>Sim</option></select></div>
<div><label>Como foi a liga√ß√£o?</label>
<select id="ligacao">
<option>Liga√ß√£o com sucesso</option>
<option>Caixa postal</option>
<option>N√£o chama</option>
<option>Telefone incorreto</option>
<option>Cliente desligou</option>
<option>Telefone n√£o cadastrado</option>
<option>Outros</option>
</select>
</div>
</div>

<div class="linha-3">
<div><label>Situa√ß√£o:</label><select id="situacao"><option>Isolada</option><option>Coletiva</option></select></div>
<div><label>Conjunto Cr√≠tico?</label><select id="cj"><option>N√£o</option><option>Sim</option></select></div>
<div><label>Risco de Vida?</label><select id="risco"><option>N√£o</option><option>Sim</option></select></div>
</div>

<label>Observa√ß√µes</label>
<textarea id="observacoes"></textarea>

<button onclick="gerarTexto()">Gerar Texto Ocorr√™ncia</button>
<button class="sec" onclick="limparCallback()">Limpar</button>

<label>Texto Gerado</label>
<textarea id="resultadoCallback" readonly></textarea>
</div>
</div>
<!-- EQUIPES DE CAMPO -->
<!-- EQUIPES DE CAMPO -->
<div id="equipes" class="module equipes-sistema">
<div class="container">

<div id="moduloEquipes">
  <h2>Controle Di√°rio de Equipes de Campo</h2>

<!-- LINHA 1 -->
<div class="eq-linha1">
  <input id="eq_equipe" placeholder="Equipe">
  <input id="eq_integrantes" placeholder="Integrantes">
  <input id="eq_telefone" placeholder="Telefone">
  <input id="eq_viatura" placeholder="Viatura">

  <select id="eq_radio">
    <option value="SIM">R√°dio SIM</option>
    <option value="N√ÉO">R√°dio N√ÉO</option>
  </select>

  <select id="eq_tipo">
    <option value="DUPLADA">DUPLADA</option>
    <option value="SOLO">SOLO</option>
  </select>

  <select id="eq_regional">
    <option value="">Selecione a regional</option>
    <option>ARACAJU</option>
    <option>S√ÉO CRIST√ìV√ÉO</option>
    <option>N. S. DO SOCORRO</option>
    <option>ITABAIANA</option>
    <option>LAGARTO</option>
    <option>N. S. DAS DORES</option>
    <option>N. S. DA GL√ìRIA</option>
    <option>PROPRI√Å</option>
    <option>MARUIM</option>
  </select>
</div>

<!-- LINHA 2 -->
<div class="eq-linha2">
  <textarea id="eq_obs" placeholder="Observa√ß√µes"></textarea>

  <select id="eq_alerta">
    <option value="">Sem prioridade</option>
    <option value="‚è±Ô∏è Religa√ß√£o vencendo 8h">‚è±Ô∏è Religa√ß√£o vencendo 8h</option>
    <option value="üí∞ Comercial ‚Äì Compensa√ß√£o Alta">üí∞ Comercial ‚Äì Compensa√ß√£o Alta</option>
    <option value="üö® Risco √† Vida">üö® Risco √† Vida</option>
    <option value="‚ö° Falta de Fase">‚ö° Falta de Fase</option>
    <option value="‚≠ê FE ‚Äì Cliente VIP">‚≠ê FE ‚Äì Cliente VIP</option>
    <option value="üì¢ Solicita√ß√£o da Supervis√£o">üì¢ Solicita√ß√£o da Supervis√£o</option>
  </select>
</div>


<div class="botoes">
  <button onclick="eq_salvar()">Adicionar √† Lista</button>
  <button onclick="eq_limpar()" class="btn-sec">Limpar Campos</button>
  <button onclick="eq_exportar()">Exportar Excel</button>
  <button onclick="eq_toggleMapa()">Recolher / Mostrar Mapa</button>
  <button onclick="eq_abrirPendencias()">üîß Pend√™ncias</button>
  <button onclick="eq_limparLista()" class="btn-danger">Limpar Lista</button>
</div>

<!-- MAPAS -->
<div id="mapas-container">
  <div class="mapas-grid">
    <div class="mapa-card" onclick="eq_abrirMapa('mapas/mapa1.jpg')">
      <img src="mapas/mapa1.jpg">
      <span>Regional Itabaiana</span>
    </div>

    <div class="mapa-card" onclick="eq_abrirMapa('mapas/mapa2.jpg')">
      <img src="mapas/mapa2.jpg">
      <span>Regional Lagarto</span>
    </div>

    <div class="mapa-card" onclick="eq_abrirMapa('mapas/mapa3.jpg')">
      <img src="mapas/mapa3.jpg">
      <span>Regional Gl√≥ria</span>
    </div>

    <div class="mapa-card" onclick="eq_abrirMapa('mapas/mapa4.jpg')">
      <img src="mapas/mapa4.jpg">
      <span>Regional Propri√°</span>
    </div>

    <div class="mapa-card" onclick="eq_abrirMapa('mapas/mapa5.jpg')">
      <img src="mapas/mapa5.jpg">
      <span>Regional Maruim</span>
    </div>
  </div>
</div>


<!-- MODAL MAPA -->
<div id="modal-mapa" class="modal-mapa" onclick="eq_fecharMapa(event)">
  <img id="modal-img" onclick="event.stopPropagation()">
</div>


<!-- FILTROS -->
<div class="eq-filtros">
  <input id="eq_busca" placeholder="Buscar equipe" onkeyup="eq_render()">

  <select id="eq_filtroRegional" onchange="eq_render()">
    <option value="">Todas Regionais</option>
    <option>ARACAJU</option>
    <option>S√ÉO CRIST√ìV√ÉO</option>
    <option>N. S. DO SOCORRO</option>
    <option>ITABAIANA</option>
    <option>LAGARTO</option>
    <option>N. S. DAS DORES</option>
    <option>PROPRI√Å</option>
    <option>MARUIM</option>
  </select>

  <div id="eq_resumo"></div>
</div>


<table>
<thead>
<tr>
<th>Equipe</th>
<th>Integrantes</th>
<th>Telefone</th>
<th>Viatura</th>
<th>R√°dio</th>
<th>Tipo</th>
<th>Regional</th>
<th>Obs</th>
<th>‚ö†</th>
<th>A√ß√µes</th>
</tr>
</thead>
<tbody id="eq_tabela"></tbody>
</table>

</div>

<!-- ================= PEND√äNCIAS ================= -->
<div id="moduloPendencias" style="display:none">

<h2>Pend√™ncias Operacionais</h2>

<div class="form-grid-6">
  <input id="p_equipe" placeholder="OS / Ocorr√™ncia">
  <select id="p_regional">
    <option value="">Regional</option>
    <option>ARACAJU</option>
    <option>S√ÉO CRIST√ìV√ÉO</option>
    <option>N. S. DO SOCORRO</option>
    <option>ITABAIANA</option>
    <option>LAGARTO</option>
    <option>N. S. DAS DORES</option>
    <option>PROPRI√Å</option>
    <option>MARUIM</option>
  </select>
  <select id="p_tipo">
    <option value="">Tipo</option>
    <option>Material</option>
    <option>Ve√≠culo</option>
    <option>Log√≠stica</option>
    <option>Operacional</option>
    <option>Cr√≠tica</option>
  </select>
  <select id="p_prioridade">
    <option value="NORMAL">Normal</option>
    <option value="ALTA">Alta</option>
    <option value="CR√çTICA">Cr√≠tica</option>
  </select>
  <select id="p_status">
    <option>PENDENTE</option>
    <option>EM ANDAMENTO</option>
    <option>RESOLVIDO</option>
    <option>TRANSFERIDO</option>
  </select>
  <input type="date" id="p_vencimento">
</div>

<div class="form-grid" style="margin-top:8px">
  <textarea id="p_descricao" placeholder="Descri√ß√£o da pend√™ncia"></textarea>
</div>

<div class="botoes">
  <button onclick="eq_salvarPendencia()">Adicionar Pend√™ncia</button>
  <button onclick="eq_limparPendencia()" class="btn-sec">Limpar Campos</button>
  <button onclick="eq_gerarRelatorioPendencias()">Gerar Relat√≥rio do Dia</button>
  <button onclick="eq_limparListaPendencias()" class="btn-danger">Limpar Lista</button>
  <button onclick="eq_voltarEquipes()" class="btn-sec">‚¨Ö Voltar</button>
</div>

<table>
<thead>
<tr>
<th>OS</th>
<th>Regional</th>
<th>Tipo</th>
<th>Descri√ß√£o</th>
<th>Prioridade</th>
<th>Status</th>
<th>Vencimento</th>
<th>A√ß√µes</th>
</tr>
</thead>
<tbody id="tabelaPendencias"></tbody>
</table>

</div>

</div>
</div>

<!-- PREENCIMENTO DE SS -->
<div id="ss" class="module">
  <div class="container">
    <h2>PREENCHIMENTO DE SS</h2>

    <div class="linha-3">
      <div>
        <label>POLO / REGIONAL</label>
        <select id="ss_regional">
          <option value="">Selecione</option>
          <option>ARACAJU</option>
          <option>N.S SOCORRO</option>
          <option>S√ÉO CRIST√ìV√ÉO</option>
          <option>ITABAIANA</option>
          <option>LAGARTO</option>
          <option>N.S GL√ìRIA</option>
          <option>N.S DORES</option>
          <option>PROPRI√Å</option>
          <option>MARUIM</option>
        </select>
      </div>

      <div>
        <label>ABRANG√äNCIA</label>
        <select id="ss_abrangencia">
          <option value="">Selecione</option>
          <option value="T1">T1 - ALIMENTADOR</option>
          <option value="T2">T2 - RELIGADOR</option>
          <option value="T3">T3 - CHAVE SECCIONADORA</option>
        </select>
      </div>

      <div>
        <label>TIPO DE EQUIPE</label>
        <select id="ss_equipe">
          <option value="">Selecione</option>
          <option>LINHA MORTA</option>
          <option>LINHA VIVA</option>
          <option>EQUIPE PODA</option>
        </select>
      </div>
    </div>

    <div class="linha-3">
      <div>
        <label>ACESSO PARA CAMINH√ÉO</label>
        <select id="ss_acesso">
          <option value="">Selecione</option>
          <option>COM ACESSO</option>
          <option>SEM ACESSO</option>
        </select>
      </div>

      <div>
        <label>CHAVE REFER√äNCIA</label>
        <select id="ss_ref">
          <option value="">Selecione</option>
          <option value="CF">CF - CHAVE FUS√çVEL</option>
          <option value="CS">CS - CHAVE FACA</option>
          <option value="TD">TD - TRANSFORMADOR DE DISTRIBUI√á√ÉO</option>
          <option value="RD">RD - RELIGADOR DE DISTRIBUI√á√ÉO</option>
          <option value="RT">RT - REGULADOR DE TENS√ÉO</option>
        </select>
      </div>

      <div>
        <label>N¬∞ CHAVE </label>
        <input id="ss_num" type="number" inputmode="numeric" pattern="[0-9]*">

      </div>
    </div>

    <div class="linha-3">
      <div>
        <label>ID:</label>
        <input id="ss_id" type="number" inputmode="numeric" pattern="[0-9]*">

      </div>

      <div>
        <label>DESCRI√á√ÉO DO SERVI√áO:</label>
        <input id="ss_servico">
      </div>

      <div>
        <label>COORDENADAS:</label>
        <input id="ss_coord">
      </div>
    </div>

    <label>ENDERE√áO DO SERVI√áO:</label>
    <input id="ss_endereco">

    <label>OBSERVA√á√ïES RELEVANTES:</label>
    <textarea id="ss_obs"></textarea>

    <div class="linha-3">
      <button onclick="gerarSSWhats()">üì≤ Gerar Relat√≥rio WhatsApp</button>
      <button onclick="gerarSSPadrao()">üßæ Gerar Relat√≥rio SS</button>
      <button class="sec" onclick="limparSS()">üÜï Novo Script</button>
    </div>

    <label>Resultado</label>
    <textarea id="ss_resultado" readonly></textarea>

  </div>
</div>

</div>


<script>
function showToast(msg){
 const t=document.getElementById("toast");
 t.innerText=msg;
 t.style.display="block";
 setTimeout(()=>t.style.display="none",2000);
}

function openModule(id,btn){
 document.querySelectorAll('.module').forEach(m=>m.classList.remove('active'));
 document.querySelectorAll('.menu button').forEach(b=>b.classList.remove('active'));
 document.getElementById(id).classList.add('active');
 btn.classList.add('active');
}

/* OCORR√äNCIAS */
function horaAtual(){
 return new Date().toLocaleTimeString('pt-BR',{hour:'2-digit',minute:'2-digit'})+'H';
}
function adicionarHistorico(){
 if(!obsTexto.value.trim()) return;
 historico.value+=(historico.value?"\n":"")+"# "+horaAtual()+" "+obsTexto.value;
 obsTexto.value="";
}
function copiarHistorico(){
 navigator.clipboard.writeText(historico.value);
 showToast("Hist√≥rico copiado com sucesso!");
}
function limparHistorico(){
 historico.value="";
 obsTexto.value="";
}

/* BLOQUEIO */
function gerarRelatorio(){
 const t=`Data/Hora: ${new Date().toLocaleString("pt-BR")}
Respons√°vel: ${responsavel.value}
Equipe: ${bloq_equipe.value}
Contato: ${eq_telefone.value}
Viatura: ${eq_viatura.value}
R√°dio: ${eq_radio.value}
Teste R√°dio: ${testeRadio.value}
Self-healing: ${selfhealing.value}
Desativou SH: ${desativou.value}
Refer√™ncia: ${referencia.value}
Servi√ßo: ${servico.value}
Observa√ß√£o: ${obsRel.value||""}`;
 resultado.value=t;
 navigator.clipboard.writeText(t);
 showToast("Relat√≥rio copiado com sucesso!");
}
function limparRelatorio(){
 document.querySelectorAll('#rel input,#rel textarea').forEach(e=>e.value="");
}

/* CALLBACK */
function atualizarDataHora(){
 dataHora.value=new Date().toLocaleString("pt-BR");
}
atualizarDataHora();

function gerarTexto(){
 atualizarDataHora();
 const atuacao = celular.checked ? telefone.value : ramal.value;
 const t=`Data/Hora: ${dataHora.value} # Operador: ${operador.value} # Atua√ß√£o: ${atuacao} # CL Reincidente: ${reincidente.value} # Liga√ß√£o: ${ligacao.value} # Situa√ß√£o: ${situacao.value} # CJ Cr√≠tico: ${cj.value} # Risco de Vida: ${risco.value} # Observa√ß√µes: ${observacoes.value||"Sem observa√ß√µes"}`;
 resultadoCallback.value=t;
 navigator.clipboard.writeText(t);
 showToast("Texto de callback copiado com sucesso!");
}
function limparCallback(){
 document.querySelectorAll('#callback input,#callback textarea').forEach(e=>e.value="");
 document.querySelectorAll('#callback select').forEach(e=>e.selectedIndex=0);
 atualizarDataHora();
}

function atualizarRodape(){
    const agora = new Date();

    const data = agora.toLocaleDateString("pt-BR");
    const hora = agora.toLocaleTimeString("pt-BR", {
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
    });

    document.getElementById("dataHoraSistema").innerText = data + " " + hora;
}

setInterval(atualizarRodape, 1000);
atualizarRodape();
/* ================================
   M√ìDULO EQUIPES (ISOLADO)
================================ */

let eq_dados = JSON.parse(localStorage.getItem("equipes")) || [];
let eq_pendencias = JSON.parse(localStorage.getItem("pendencias")) || [];
let eq_edit = null;
let eq_editPend = null;

/* ===== MAPAS ===== */
function eq_abrirMapa(src){
  const modal = document.getElementById("modal-mapa");
  const img = document.getElementById("modal-img");

  img.src = src;
  modal.style.display = "flex";
}

function eq_fecharMapa(e){
  // s√≥ fecha se clicar no fundo escuro
  if(e.target.id === "modal-mapa"){
    document.getElementById("modal-mapa").style.display = "none";
  }
}


/* ===== EQUIPES ===== */
function eq_salvar(){
  if(!eq_equipe.value.trim()){
    alert("Informe a equipe");
    return;
  }

  const obj = {
    equipe: eq_equipe.value.toUpperCase(),
    integrantes: eq_integrantes.value.toUpperCase(),
    telefone: eq_telefone.value,
    viatura: eq_viatura.value,
    radio: eq_radio.value,
    tipo: eq_tipo.value,
    regional: eq_regional.value,
    obs: eq_obs.value,
    alerta: eq_alerta.value
  };

  if(eq_edit !== null){
    eq_dados[eq_edit] = obj;
    eq_edit = null;
  } else {
    eq_dados.push(obj);
  }

  localStorage.setItem("equipes", JSON.stringify(eq_dados));
  eq_limpar();
  eq_render();
}

function eq_render(){
  eq_tabela.innerHTML = "";
  let total = 0;

  eq_dados.forEach((d,i)=>{
    if((!eq_busca.value || d.equipe.includes(eq_busca.value.toUpperCase())) &&
       (!eq_filtroRegional.value || d.regional === eq_filtroRegional.value)){

      total++;

let icone = "";
if(d.alerta){
  let emoji = d.alerta.match(/^[^\s]+/)[0]; // pega o emoji
  let cor = "vermelho";

  if(
    d.alerta.includes("Religa√ß√£o") ||
    d.alerta.includes("Falta")
  ){
    cor = "amarelo";
  }

 icone = `<span class="alerta ${cor}" title="${d.alerta}">${emoji}</span>`;

}


  eq_tabela.innerHTML += `
<tr>
  <td>${d.equipe}</td>
  <td>${d.integrantes || "-"}</td>
  <td>${d.telefone || "-"}</td>
  <td>${d.viatura || "-"}</td>
  <td>${d.radio}</td>
  <td>${d.tipo}</td>
  <td>${d.regional || "-"}</td>
  <td>${d.obs || "-"}</td>
  <td>${icone}</td>
  <td>
    <button onclick="eq_copiarEquipe(${i})" class="btn-icone btn-sec">üìã</button>
    <button onclick="eq_editar(${i})" class="btn-icone btn-editar">‚úèÔ∏è</button>
    <button onclick="eq_remover(${i})" class="btn-icone btn-excluir">üóëÔ∏è</button>
  </td>
</tr>
`;
    }
  });

  eq_resumo.innerText = `Total de equipes exibidas: ${total}`;
}

function eq_editar(i){
  const d = eq_dados[i];
  eq_equipe.value = d.equipe;
  eq_integrantes.value = d.integrantes;
  eq_telefone.value = d.telefone;
  eq_viatura.value = d.viatura;
  eq_radio.value = d.radio;
  eq_tipo.value = d.tipo;
  eq_regional.value = d.regional;
  eq_obs.value = d.obs;
  eq_alerta.value = d.alerta;
  eq_edit = i;
}

function eq_remover(i){
  if(confirm("Remover equipe?")){
    eq_dados.splice(i,1);
    localStorage.setItem("equipes", JSON.stringify(eq_dados));
    eq_render();
  }
}

function eq_limpar(){
  eq_equipe.value="";
  eq_integrantes.value="";
  eq_telefone.value="";
  eq_viatura.value="";
  eq_obs.value="";
  eq_alerta.value="";
  eq_regional.value="";
  eq_edit = null;
}

function eq_limparLista(){
  if(confirm("Deseja limpar toda a lista?")){
    eq_dados = [];
    localStorage.removeItem("equipes");
    eq_render();
  }
}

function eq_exportar(){
  let csv="Equipe;Integrantes;Telefone;Viatura;R√°dio;Tipo;Regional;Obs;Alerta\n";
  eq_dados.forEach(d=>{
    csv+=`${d.equipe};${d.integrantes};${d.telefone};${d.viatura};${d.radio};${d.tipo};${d.regional};${d.obs};${d.alerta}\n`;
  });
  let a=document.createElement("a");
  a.href=URL.createObjectURL(new Blob([csv],{type:"text/csv"}));
  a.download="equipes.csv";
  a.click();
}

/* ===== PEND√äNCIAS ===== */
function eq_abrirPendencias(){
  document.getElementById("moduloEquipes").style.display="none";
  document.getElementById("moduloPendencias").style.display="block";
  eq_renderPendencias();
}

function eq_voltarEquipes(){
  document.getElementById("moduloPendencias").style.display="none";
  document.getElementById("moduloEquipes").style.display="block";
}

function eq_salvarPendencia(){
  if(!p_equipe.value || !p_descricao.value){
    alert("Informe OS/Ocorr√™ncia e descri√ß√£o");
    return;
  }

  const obj={
    equipe:p_equipe.value.toUpperCase(),
    regional:p_regional.value,
    tipo:p_tipo.value,
    prioridade:p_prioridade.value,
    status:p_status.value,
    descricao:p_descricao.value,
    vencimento:p_vencimento.value
  };

  if(eq_editPend!==null){
    eq_pendencias[eq_editPend]=obj;
    eq_editPend=null;
  }else{
    eq_pendencias.push(obj);
  }

  localStorage.setItem("pendencias",JSON.stringify(eq_pendencias));
  eq_limparPendencia();
  eq_renderPendencias();
}

function eq_renderPendencias(){
  tabelaPendencias.innerHTML="";

  const hoje = new Date();
  hoje.setHours(0,0,0,0);

  eq_pendencias.forEach((p,i)=>{

    /* ===== DATA ===== */
    let dataBR = "-";
    let statusClasse = "";
    let dataClasse = "";

    if(p.vencimento){
      const dataObj = new Date(p.vencimento + "T00:00:00");
      dataBR = dataObj.toLocaleDateString("pt-BR");

      if(dataObj < hoje){
        // vencido
        statusClasse = "status-vencido";
        dataClasse = "status-vencido";
      }else{
        // ainda n√£o venceu
        statusClasse = "status-ok";   // amarelo
        dataClasse = "status-ok";     // amarelo
      }
    }

    /* ===== PRIORIDADE ===== */
    let classePrio = "prio-normal";
    if(p.prioridade === "ALTA") classePrio = "prio-alta";
    if(p.prioridade === "CR√çTICA") classePrio = "prio-critica";

    tabelaPendencias.innerHTML += `
    <tr>
      <td>${p.equipe}</td>
      <td>${p.regional||"-"}</td>
      <td>${p.tipo||"-"}</td>
      <td style="text-align:left">${p.descricao}</td>
      <td class="${classePrio}">${p.prioridade}</td>
      <td class="${statusClasse}">${p.status}</td>
      <td class="${dataClasse}">${dataBR}</td>
      <td>
        <button class="btn-icone btn-sec" onclick="eq_copiarPendencia(${i})">üìã</button>
        <button class="btn-icone btn-editar" onclick="eq_editarPendencia(${i})">‚úèÔ∏è</button>
        <button class="btn-icone btn-excluir" onclick="eq_removerPendencia(${i})">üóëÔ∏è</button>
      </td>
    </tr>`;
  });
}



function eq_editarPendencia(i){
  const p=eq_pendencias[i];
  p_equipe.value=p.equipe;
  p_regional.value=p.regional;
  p_tipo.value=p.tipo;
  p_prioridade.value=p.prioridade;
  p_status.value=p.status;
  p_descricao.value=p.descricao;
  p_vencimento.value=p.vencimento;
  eq_editPend=i;
}

function eq_removerPendencia(i){
  if(confirm("Remover pend√™ncia?")){
    eq_pendencias.splice(i,1);
    localStorage.setItem("pendencias",JSON.stringify(eq_pendencias));
    eq_renderPendencias();
  }
}

function eq_limparPendencia(){
  p_equipe.value="";
  p_descricao.value="";
  p_regional.value="";
  p_tipo.value="";
  p_prioridade.value="NORMAL";
  p_status.value="PENDENTE";
  p_vencimento.value="";
  eq_editPend=null;
}

function eq_limparListaPendencias(){
  if(confirm("Limpar todas as pend√™ncias?")){
    eq_pendencias=[];
    localStorage.removeItem("pendencias");
    eq_renderPendencias();
  }
}

function eq_gerarRelatorioPendencias(){
  if(eq_pendencias.length===0){
    alert("Nenhuma pend√™ncia registrada");
    return;
  }

  let texto="üö® PEND√äNCIAS DO DIA\n\n";
  eq_pendencias.forEach(p=>{
    texto+=`üßæ ${p.equipe} | ${p.regional||"-"} | ${p.tipo||"-"}
üìù ${p.descricao}
üìÖ Venc: ${p.vencimento||"-"}\n\n`;
  });

  navigator.clipboard.writeText(texto);
  alert("Relat√≥rio copiado!");
}

/* INIT */
eq_render();
function eq_toggleMapa(){
  const mapas = document.getElementById("mapas-container");

  if(!mapas) return;

  mapas.classList.toggle("hidden");
}
function eq_copiarEquipe(i){
  const d = eq_dados[i];

  const texto = `üìã EQUIPE DE CAMPO

üë• Equipe: ${d.equipe}
üë§ Integrantes: ${d.integrantes || "-"}
üìû Telefone: ${d.telefone || "-"}
üöê Viatura: ${d.viatura || "-"}
üì° R√°dio: ${d.radio || "-"}
üîÅ Tipo: ${d.tipo || "-"}
üìç Regional: ${d.regional || "-"}
üìù Obs: ${d.obs || "-"}`;

  navigator.clipboard.writeText(texto);
  showToast("Dados da equipe copiados üìã");
}

function eq_copiarPendencia(i){
  const p = eq_pendencias[i];

  if(!p){
    console.error("Pend√™ncia n√£o encontrada:", i);
    return;
  }

  const texto = 
`üö® PEND√äNCIA OPERACIONAL

üßæ OS/Ocorr√™ncia: ${p.equipe}
üìç Regional: ${p.regional || "-"}
üì¶ Tipo: ${p.tipo || "-"}
‚ö† Prioridade: ${p.prioridade}
üìå Status: ${p.status}
üìÖ Vencimento: ${p.vencimento ? new Date(p.vencimento+"T00:00:00").toLocaleDateString("pt-BR") : "-"}
üìù Descri√ß√£o:
${p.descricao}`;

  navigator.clipboard.writeText(texto)
    .then(() => {
      showToast("Pend√™ncia copiada üìã");
    })
    .catch(err => {
      console.error("Erro ao copiar pend√™ncia:", err);
      alert("Erro ao copiar pend√™ncia");
    });
}
/* =========================
   PREENCIMENTO DE SS
========================= */

function gerarSSWhats(){
  const ref = ss_ref.value && ss_num.value ? `${ss_ref.value} ${ss_num.value}` : "-";
  const id = ss_id.value ? `ID: ${ss_id.value}` : "-";

  const texto =
`üßæ SS

REGIONAL: ${ss_regional.value || "-"}
ABRANG√äNCIA: ${ss_abrangencia.value || "-"}
EQUIPE: ${ss_equipe.value || "-"}
ACESSO: ${ss_acesso.value || "-"}
REF.EL√âTRICA: ${ref}

${id}
SERVI√áO: ${ss_servico.value || "-"}
ENDERE√áO: ${ss_endereco.value || "-"}
COORD: ${ss_coord.value || "-"}
OBS: ${ss_obs.value || "-"}`;

  ss_resultado.value = texto;
  navigator.clipboard.writeText(texto);
  showToast("Relat√≥rio WhatsApp copiado üì≤");
}

function gerarSSPadrao(){
  const ref = ss_ref.value && ss_num.value ? `${ss_ref.value} ${ss_num.value}` : "-";
  const id = ss_id.value ? `ID:${ss_id.value}` : "-";

  const texto =
`REGIONAL:${ss_regional.value || "-"} | ABRANG√äNCIA:${ss_abrangencia.value || "-"} | EQUIPE:${ss_equipe.value || "-"} | ACESSO:${ss_acesso.value || "-"} | REF.EL√âTRICA:${ref} | ${id} | SERVI√áO:${ss_servico.value || "-"} | ENDERE√áO:${ss_endereco.value || "-"} | COORD:${ss_coord.value || "-"} | OBS:${ss_obs.value || "-"}`;

  ss_resultado.value = texto;
  navigator.clipboard.writeText(texto);
  showToast("Relat√≥rio SS copiado üßæ");
}

function limparSS(){
  document.querySelectorAll('#ss input, #ss textarea').forEach(e=>e.value="");
  document.querySelectorAll('#ss select').forEach(e=>e.selectedIndex=0);
  ss_resultado.value="";
}

</script>
<div class="footer-global">
  <div class="footer-left">
    <img src="Energisa.svg.png" class="footer-logo">
  </div>

  <div class="footer-center">
    <div class="footer-status">
      <span class="dot"></span>
      <span class="status-text">ONLINE</span>
    </div>

    <div class="footer-msg">
      üîí Sistema de uso interno operacional ‚Ä¢ COI SERGIPE
    </div>
  </div>

<div class="footer-right" id="footer-hora">DEUS seja Louvado</div>

</div>

</body>
</html>


